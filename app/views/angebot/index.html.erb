<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Fleema // Fahrzeuge // Bearbeiten</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <!--  <link rel='stylesheet' type='text/css' media='screen' href='assets/css/bootstrap.min.css'>-->
  <%= stylesheet_link_tag "bootstrap.min.css", media: "screen" %>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,600;0,800;1,200;1,400&display=swap"
    rel="stylesheet">
  <%= stylesheet_link_tag "style", media: "screen" %>
  <%= stylesheet_link_tag href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" %>
</head>

<body id="">
<!--<div id="header"></div>-->
<div class="container">
  <div class="row ">
    <div class="col-md-12 col-sm-12">
      <div class="content p-3">
        <h1>ANGEBOT</h1>
        <div class="">
          <div class="tabs-view">
            <!-- Lined tabs-->
            <ul id="myTab2" role="tablist"
                class="nav nav-tabs nav-pills with-arrow lined flex-column flex-sm-row text-center">
              <li class="nav-item flex-sm-fill">
                <a id="home2-tab" data-toggle="tab" href="#tab1" class="nav-link active">Suchen</a>
              </li>
              <li class="nav-item flex-sm-fill">
                <a id="profile2-tab" data-toggle="tab" href="#tab2" class="nav-link">Berechnen</a>
              </li>
              <li class="nav-item flex-sm-fill">
                <a id="contact2-tab" data-toggle="tab" href="#tab3" class="nav-link">Vorschau</a>
              </li>
              <li class="nav-item flex-sm-fill">
                <a id="contact2-tab" data-toggle="tab" href="#tab4" class="nav-link">Speichern</a>
              </li>
            </ul>
            <div id="myTab2Content" class="tab-content">
              <div id="tab1" role="tabpanel" aria-labelledby="home-tab"
                   class="tab-pane fade px-4 py-5 show active">
                <div class="d-flex justify-content-end">
                  <div class="w-75">
                    <label class="my-2 d-block">
                      NACH FAHRZEUG SUCHEN
                    </label>
                    <input type="text" class="bg-light p-1 w-100 border border-secondary"
                           value="" placeholder="" />
                  </div>
                  <div class="w-100 text-end">
                    <div class="w-50 mx-auto mt-3 text-center">
                      <a href="#" class="link-reset">
                        <p class="m-0 fs-3"><i class="fa fa-times-circle"
                                               aria-hidden="true"></i>
                        </p>
                        <p class="m-0">Suche zurücksetzen</p>
                      </a>
                    </div>
                  </div>
                </div>
                <div class="my-3">
                  <div class="table-responsive">
                    <table class="table my_table w-100" id= "cars_table">
                      <tr>
                        <th>Interne Nr.</th>
                        <th>Marke, Modell, Modellvariante</th>
                        <th>Preis</th>
                        <th>Kilometerstand</th>
                      </tr>
                      <% Car.all.each do |car| %>
                        <tr>
                          <td><%= car.id %></td>
                          <td><%= "#{car.name} #{car.model}" %></td>
                          <td><%= number_to_currency(car.gross_price) %></td>
                          <td><%= car.mileage %></td>
                        </tr>
                      <% end %>
                    </table>
                  </div>
                </div>
                <div class="d-flex justify-content-end">
                  <div class="w-75">
                    <label class="my-2 d-block">
                      NACH KUNDEN SUCHEN
                    </label>
                    <input type="text" class="bg-light p-1 w-100 border border-secondary"
                           value="" placeholder="" />
                  </div>
                  <div class="w-100 text-end d-flex ms-5">
                    <div class="w-25 mt-3 text-center">
                      <a href="#" class="link-reset">
                        <p class="m-0 fs-3"><i class="fa fa-times-circle"
                                               aria-hidden="true"></i>
                        </p>
                        <p class="m-0">Suche zurücksetzen</p>
                      </a>
                    </div>
                    <div class="w-25 mt-3 text-center">
                      <a href="#" class="link-reset">
                        <p class="m-0 fs-3"> <i class="fa fa-plus-circle"
                                                aria-hidden="true"></i>
                        </p>
                        <p class="m-0">Hinzufügen</p>
                      </a>
                    </div>
                  </div>
                </div>
                <div class="my-3 d-flex">
                  <div class="w-75">
                    <div class="table-responsive">

                      <table class="table my_table w-100" id="cust_table">
                        <tr>
                          <th>Persönliche Daten</th>
                          <th>E-Mail</th>
                          <th>Fahrzeug </th>
                        </tr>
                        <% Hinzufugen.all.each do |cust| %>
                          <tr>
                            <td style="display:none;"><%=cust[:id] %></td>
                            <td><%="#{cust[:first_name]} #{cust[:last_name]}" %></td>
                            <td><%=cust[:email] %></td>
                            <td></td>
                          </tr>
                        <%  end  %>
                      </table>
                    </div>
                  </div>
                  <div class="w-25 text-center">
                    <a href="#" class="link-reset">
                      <p class="m-0 fs-3">
                        <i class="fa fa-user" aria-hidden="true"></i>
                      </p>
                      <p class="m-0">Bearbeiten</p>
                    </a>
                  </div>
                </div>
              </div>
              <div id="tab2" role="tabpanel" aria-labelledby="profile-tab"
                   class="tab-pane fade px-4 py-5">
                <h5 class="color-primary mb-3">BERECHNUNG</h5>
                <div class="card-text" id="">
                  <div class="mb-3">
                    <div class="row">
                      <div class="col-md-4 col-sm-12">
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="radio"
                                 name="flexRadioDefault" id="Brutto">
                          <label class="form-check-label" for="Brutto">
                            Brutto
                          </label>
                        </div>
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="radio"
                                 name="flexRadioDefault" id="Netto">
                          <label class="form-check-label" for="Netto">
                            Netto (gemäß §6 UStG)
                          </label>
                        </div>
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="radio"
                                 name="flexRadioDefault" id="Nettos">
                          <label class="form-check-label" for="Nettos">
                            Netto (gemäß §6a UStG)
                          </label>
                        </div>
                        <div class="mb-3">
                          <label>MwSt.-Satz</label>
                          <select class="form-select bg-light"
                                  aria-label="Default select example">
                            <option value="" selected="selected">Bitte wählen</option>
                            <option value="7">7 %</option>
                            <option value="7,6">7,6 %</option>
                            <option value="8">8 %</option>
                            <option value="9">9 %</option>
                            <option value="10,7">10,7 %</option>
                            <option value="15">15 %</option>
                            <option value="16">16 %</option>
                            <option value="17">17 %</option>
                            <option value="17,5">17,5 %</option>
                            <option value="18">18 %</option>
                            <option value="19">19 %</option>
                            <option value="19,6">19,6 %</option>
                            <option value="20">20 %</option>
                            <option value="21">21 %</option>
                            <option value="22">22 %</option>
                            <option value="23">23 %</option>
                            <option value="24">24 %</option>
                            <option value="25">25 %</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label class="d-block">
                            Preisangaben
                          </label>
                          <select class="form-select bg-light"
                                  aria-label="Default select example">
                            <option value="gross" selected="selected">Brutto
                            </option>
                            <option value="net">Netto</option>
                            <option value="onRequest">Preis auf Anfrage</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-4 col-sm-12">
                        <div class="w-100 mb-3">
                          <label class="d-block">
                            Preis Inkl. MwSt.
                          </label>
                          <input type="text"
                                 class="bg-light p-1 w-100 border border-secondary" value=""
                                 placeholder="" />
                        </div>
                        <div class="w-100 mb-3">
                          <label class="d-block">
                            Netto
                          </label>
                          <input type="text"
                                 class="bg-light p-1 w-100 border border-secondary" value=""
                                 placeholder="" />
                        </div>
                        <div class="w-100 mb-3">
                          <label class="d-block">
                            MwSt.
                          </label>
                          <input type="text"
                                 class="bg-light p-1 w-100 border border-secondary" value=""
                                 placeholder="" />
                        </div>
                        <div class="w-100 mb-3">
                          <label class="d-block">
                            Brutto</label>
                          <input type="text"
                                 class="bg-light p-1 w-100 border border-secondary" value=""
                                 placeholder="" />
                        </div>
                      </div>
                      <div class="col-md-4 col-sm-12">
                        <div class="w-100 mb-3">
                          <label class="d-block">
                            Sonstige Vereinbarungen</label>
                          <div class="form-floating">
                                                            <textarea
                                                              class="bg-light  form-control border border-secondary"
                                                              placeholder=""
                                                              id="floatingTextarea2" style="height: 150px"></textarea>
                            <label for="floatingTextarea2"></label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div id="tab3" role="tabpanel" aria-labelledby="contact-tab"
                   class="tab-pane fade px-4 py-5">
                <div class="row">
                  <div class="col-md-6 col-sm-12">
                    <div class="h-100">
                      <iframe src="<%= generate_angebot_path(format: :pdf) %>" frameborder="0"
                              class="w-100 h-100" id="probefahrt_pdf_display"></iframe>



                    </div>

                  </div>
                  <div class="col-md-6 col-sm-12">
                    <div class="w-100 mb-3">
                      <label class="d-block">
                        Modellvariante
                      </label>
                      <input type="text" class="bg-light p-1 w-100 border border-secondary"
                             value="" placeholder="" />
                    </div>
                    <div class="w-100 mb-3">
                      <label class="d-block">
                        Schriftgröße
                      </label>
                      <select class="form-select bg-light w-50"
                              aria-label="">

                        <option value="60">60 %</option>
                        <option value="80">80 %</option>
                        <option value="90">90 %</option>
                        <option value="100" selected="selected">100 %</option>
                        <option value="110">110 %</option>
                        <option value="120">120 %</option>
                        <option value="130">130 %</option>
                        <option value="140">140 %</option>
                        <option value="160">160 %</option>
                        <option value="180">180 %</option>
                        <option value="200">200 %</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <input class="form-check-input" type="checkbox" value=""
                             id="flexCheckDefault">
                      <label class="form-check-label" for="">
                        Ausstattung anzeigen</label>
                      <textarea class="bg-light mt-2 w-100 border border-secondary"
                                placeholder="" id="floatingTextarea2"
                                style="height: 100px"></textarea>

                    </div>
                    <div class="mb-3">
                      <input class="form-check-input" type="checkbox" value=""
                             id="flexCheckDefault">
                      <label class="form-check-label" for="">
                        Beschreibungsstext anzeigen</label>
                      <textarea class="bg-light mt-2 w-100 border border-secondary"
                                placeholder="" id="floatingTextarea2"
                                style="height: 100px"></textarea>

                    </div>
                    <p class="text-end">
                      <a href="#" class="link-reset">Vorschau aktualisieren</a>
                    </p>
                  </div>
                </div>
              </div>
              <div id="tab4" role="tabpanel" aria-labelledby="contact-tab"
                   class="tab-pane fade px-4 py-5">
                <div class="d-flex">

                  <div>
                    <%= image_tag "checklist-icon.png", alt: "" %>
                    <%= image_tag "" %>
                  </div>
                  <div class="mt-1 ms-2"><%= link_to "Angebot.pdf", generate_angebot_path(format: :pdf), id: "probefahrt_pdf_dwnld", class: "link-reset fw-bold" %>

                  </div>
                </div>
                <div class="mt-4">
                  <a href="#" class="link-reset fw-bold d-block my-2">
                    Weiteres Angebot erstellen
                  </a>

                  <a href="#" class="link-reset fw-bold d-block my-2">
                    Liste der Dokumente
                  </a>
                </div>



              </div>
            </div>
            <!-- End lined tabs -->
          </div>
        </div>

        <div class="p-2 text-end">
          <div id="navigationBtns">
            <a href="#" class="link-reset">Abbrechen</a>
            <input type="button" id="" value="Zurück" title="" class="orange-btn btnPrevious">
            <input type="button" id="" value="Nächste" title="Nächste" class="orange-btn btnNext">
            <input type="button" id="" value="Speichern" title="Speichern" class="orange-btn">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--<div id="footer"></div>-->


<a href="#top" id="scrollUp" class="orange-color">
  <i class="fa fa-angle-up"></i>
</a>
<div id="carmodelpopup"></div>
<div id="carmodelpopup_two"></div>

<%#= javascript_include_tag "jquery-3.3.1.slim.min.js" %>
<%= javascript_include_tag "https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",
                           integrity: "", crossorigin: "anonymous" %>
<%= javascript_include_tag "popper.min.js", integrity: "", crossorigin: "anonymous" %>
<%= javascript_include_tag "bootstrap.min.js", integrity: "", crossorigin: "anonymous" %>
<%= javascript_include_tag "bootstrap.bundle.min.js", integrity: "", crossorigin: "anonymous" %>
<%= javascript_include_tag "js.js"%>
</body>

</html>

<script type="text/javascript">
  var link_url = $('#probefahrt_pdf_dwnld')[0].pathname
  var selected_val = {}
    $("#cars_table tr").click(function(){
        $(this).addClass('tr-active').siblings().removeClass('tr-active');
        var value=$(this).find('td:first').html();
        selected_val["car_id"] = value;
        link_url = link_url + "?car_id=" + value;
    });

    $("#cust_table tr").click(function(){
        $(this).addClass('tr-active').siblings().removeClass('tr-active');
        var value=$(this).find('td:first').html();
        selected_val["cust_id"] = value;
        link_url = link_url + "&cust_id=" + value;
        $('#probefahrt_pdf_dwnld').attr('href', link_url);
        $('#probefahrt_pdf_display').attr('src', link_url);
    });
</script>
